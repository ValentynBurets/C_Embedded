#include <stm32f407xx.h>
#include "main.h"
#include "InitGPIO.h"
#include "LCDInit.h"

static volatile uint16_t delay_c = 0; 


static uint8_t symb1[][W] = 
{ 
	{0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x01},
	{0x01, 0x03, 0x02, 0x06, 0x04, 0x0C, 0x08, 0x18, 0x10, 0x30, 0x20, 0x60},
	{0x40, 0xC0, 0x80, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00},
  {0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x03, 0x07, 0x1F, 0x7C, 0xF0, 0xE0},
  {0x80, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00},
  {0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00},
  {0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00},
  {0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00},
  {0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00},
  {0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00},
  {0x00, 0x00, 0x00, 0x01, 0x01, 0x02, 0x02, 0x04, 0x04, 0x08, 0x08, 0x10},
  {0x10, 0x20, 0x20, 0x40, 0x40, 0xC0, 0x80, 0x80, 0x00, 0x00, 0x00, 0x03},
  {0x07, 0x1E, 0x7C, 0xF0, 0xC0, 0x80, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00},
  {0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00},
  {0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x80, 0x80, 0x80, 0x80},
  {0xC0, 0xC0, 0xC0, 0xE0, 0xE0, 0xE0, 0xE0, 0xE0, 0xE0, 0xC0, 0x00, 0x00},
  {0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00},
  {0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00},
  {0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x80, 0x00},
  {0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x01, 0x01, 0x01, 0x02, 0x06},
  {0x06, 0x0C, 0x08, 0x88, 0xDB, 0x6F, 0xB8, 0xF8, 0xF0, 0xE8, 0x60, 0x70},
  {0x30, 0x70, 0x70, 0x78, 0x78, 0x78, 0x78, 0x78, 0x3C, 0x3C, 0x3C, 0x3C},
  {0x3C, 0x3E, 0x1E, 0x1E, 0x1E, 0x1F, 0x1F, 0x0F, 0x0F, 0x0F, 0x0F, 0x0F},
  {0x07, 0x07, 0x07, 0x07, 0x07, 0x03, 0x03, 0x03, 0x03, 0x01, 0x01, 0x00},
  {0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x80, 0x00, 0x40},
  {0x00, 0x80, 0xA0, 0xA0, 0x80, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00},
  {0x00, 0x00, 0x00, 0x00, 0x04, 0x00, 0x02, 0x08, 0xED, 0xBC, 0xBC, 0xDF},
  {0xDF, 0xF6, 0xF2, 0xFC, 0xFC, 0xF8, 0xF8, 0x74, 0x1A, 0xCA, 0xC4, 0x86},
  {0xEA, 0xCB, 0xE3, 0x47, 0xE2, 0xFB, 0xFE, 0x7F, 0x63, 0x67, 0xEE, 0x3F},
  {0xFF, 0xCF, 0x2F, 0xAF, 0x2C, 0x7C, 0x38, 0x70, 0xD0, 0xF0, 0xC0, 0xC0},
  {0x90, 0x88, 0x08, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00},
  {0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00},
  {0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x01, 0x03, 0x27, 0x0F},
  {0xFF, 0xFF, 0xFF, 0xFD, 0xED, 0xBE, 0xFE, 0x8E, 0xE1, 0xA8, 0x80, 0xE0},
  {0xE0, 0xA0, 0xB2, 0xBE, 0x82, 0x80, 0xF9, 0xE9, 0xFD, 0xFF, 0xE3, 0xE7},
  {0xFE, 0xF6, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xF2, 0xF3, 0xF3, 0xF1, 0xF0},
  {0xF9, 0xF9, 0xFD, 0xFC, 0xFE, 0xFE, 0xFE, 0xFF, 0xFE, 0x7F, 0xEF, 0xFB},
  {0xF1, 0xE1, 0xFC, 0xFD, 0xFF, 0xFC, 0xB6, 0x74, 0x39, 0x1A, 0x0F, 0x01},
  {0x03, 0x07, 0x07, 0x0E, 0x0E, 0x1C, 0x3C, 0x38, 0x70, 0x70, 0xE0, 0xE0},
  {0xC0, 0xC0, 0x80, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00},
  {0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x10, 0x04},
  {0x06, 0x06, 0x06, 0x07, 0x01, 0x01, 0x02, 0x06, 0x07, 0x0F, 0x1C, 0x1D},
  {0x10, 0x11, 0x00, 0x00, 0x01, 0x01, 0x01, 0x01, 0x01, 0x01, 0x01, 0x03},
  {0x03, 0x07, 0x07, 0x07, 0x0F, 0x0F, 0x0F, 0x2F, 0xFF, 0xEF, 0x6F, 0xF7},
  {0xE7, 0xF7, 0xFF, 0xFF, 0xFF, 0xFF, 0xFE, 0xFF, 0xFF, 0xE3, 0x01, 0x00},
  {0x00, 0x00, 0x00, 0x00, 0x01, 0x01, 0x01, 0x00, 0x00, 0x00, 0x00, 0x00},
  {0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x01},
  {0x01, 0x03, 0x03, 0x07, 0x0F, 0x0E, 0x1E, 0x1C, 0x38, 0x78, 0x70, 0xF0},
  {0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00},
  {0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00},
  {0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00},
  {0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x0C, 0x0F, 0x0F, 0x07, 0x06},
  {0x00, 0x00, 0x00, 0x01, 0x01, 0x01, 0x01, 0x01, 0x00, 0x00, 0x00, 0x00},
  {0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00},
  {0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00},
  {0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00},
  {0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00},
  {0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00},
  {0x78, 0x14, 0x14, 0x7C, 0x00, 0x7C, 0x40, 0x40, 0x40, 0x00, 0x7C, 0x54},
  {0x54, 0x44, 0x00, 0x44, 0x28, 0x10, 0x28, 0x44, 0x00, 0x10, 0x10, 0x10},
  {0x00, 0x7C, 0x54, 0x54, 0x44, 0x00, 0x44, 0x28, 0x10, 0x28, 0x44, 0x00},
  {0x7C, 0x54, 0x54, 0x44, 0x00, 0x40, 0x00, 0x7C, 0x08, 0x10, 0x20, 0x7C},
  {0x00, 0x7C, 0x54, 0x54, 0x44, 0x00, 0x04, 0x04, 0x7C, 0x04, 0x04, 0x40},
  {0x00, 0x7C, 0x14, 0x34, 0x48, 0x00, 0x3C, 0x40, 0x40, 0x7C, 0x40, 0x00}
};









void SysTick_Handler(void){
  if(delay_c > 0)
    delay_c--;
}

void delay_ms(uint16_t delay_t){
  delay_c = delay_t;
  while(delay_c){}
}

int main(void)
{
	SysTick_Config(SystemCoreClock / 1000);
	LCD5110_GPIO_Init();
	LCD5110_Init();
	
	while(1)
	{
		LCD5110_Set_Pos(0,0);
		LCD5110_Write_Data(symb1);
		delay_ms(1000);
		
		LCD5110_Clear();
		delay_ms(1000);

	}
}
